<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Portfolio Lorenzo</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="matrix-bg"></div>

  <div class="container">
    <h1 class="glitch" data-text="âš¡ Ciao, sono Lorenzo âš¡">âš¡ Ciao, sono Kraken âš¡</h1>
    <p>Appassionato di tecnologia</p>
    <p>Attualmente in fase di ricerca di lavoro</p>
    <p>Clicca sul cubo per attivare la sandstorm</p>

    <div class="cubo" id="playCubo">
      <div class="face front"></div>
      <div class="face back"></div>
      <div class="face right"></div>
      <div class="face left"></div>
      <div class="face top"></div>
      <div class="face bottom"></div>
    </div>

    <p>Salve Stronziiiiiiiiiiiiiiiiiii ðŸ’€</p>
  </div>

  <audio id="sandstorm" loop>
    <source src="sandstorm.wav" type="audio/wav">
  </audio>

  <script>
    const cubo = document.getElementById("playCubo");
    const audio = document.getElementById("sandstorm");
    let playing = false;

    cubo.addEventListener("click", () => {
      if (!playing) {
        audio.play();
        cubo.style.boxShadow = "0 0 30px lime";
      } else {
        audio.pause();
        cubo.style.boxShadow = "0 0 20px #00ffcc";
      }
      playing = !playing;
    });

    const source = new EventSource("/beat");
    source.onmessage = (event) => {
      cubo.classList.remove("pulse");
      void cubo.offsetWidth;
      cubo.classList.add("pulse");

      document.querySelectorAll('h1, p').forEach(el => {
        el.classList.remove("text-beat");
        void el.offsetWidth;
        el.classList.add("text-beat");
      });
    };
  </script>
</body>
</html>
